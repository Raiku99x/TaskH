<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Task Hub</title>
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;1,9..40,400&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <!-- ── TOPBAR ── -->
  <header class="topbar">
    <div class="topbar-row-1">
      <div class="logo">Task<span>Hub</span></div>
      <button class="btn-add" onclick="openModal()">Add Task</button>
    </div>
    <div class="topbar-row-2">
      <button class="topbar-icon-btn" id="fullscreenBtn" onclick="toggleFullscreen()" title="Toggle Fullscreen">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/>
        </svg>
      </button>
      <button class="topbar-icon-btn" onclick="openArchive()" title="Archive">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="21 8 21 21 3 21 3 8"/>
          <rect x="1" y="3" width="22" height="5"/>
          <line x1="10" y1="12" x2="14" y2="12"/>
        </svg>
      </button>
      <span class="date-label-inline" id="dateLabelInline"></span>
      <button class="topbar-icon-btn" onclick="refreshPage()" title="Refresh">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="23 4 23 10 17 10"/>
          <polyline points="1 20 1 14 7 14"/>
          <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/>
        </svg>
      </button>
      <button class="topbar-icon-btn" id="themeToggle" onclick="toggleTheme()" title="Toggle Theme">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="theme-icon-light">
          <circle cx="12" cy="12" r="5"/>
          <line x1="12" y1="1" x2="12" y2="3"/>
          <line x1="12" y1="21" x2="12" y2="23"/>
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
          <line x1="1" y1="12" x2="3" y2="12"/>
          <line x1="21" y1="12" x2="23" y2="12"/>
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
        </svg>
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="theme-icon-dark" style="display:none;">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
        </svg>
      </button>
    </div>
  </header>

  <!-- ── PERIOD FILTER BAR ── -->
  <div class="period-bar">
    <button class="period-toggle" id="periodToggle" onclick="togglePeriod()">
      <span class="toggle-arrow">▲</span> 
      <span id="periodToggleLabel">Feb – Mar 2026</span> 
      <span class="toggle-arrow">▲</span>
    </button>
    <div class="period-container" id="periodContainer" style="display: none;">
      <div class="period-buttons">
        <button class="period-btn" data-period="day" onclick="setPeriod('day')" title="Today">
          <span class="period-letter">T</span>
          <span class="period-text">Today</span>
        </button>
        <button class="period-btn" data-period="tomorrow" onclick="setPeriod('tomorrow')" title="Tomorrow">
          <span class="period-letter">2</span>
          <span class="period-text">TMRW</span>
        </button>
        <button class="period-btn" data-period="week" onclick="setPeriod('week')" title="This Week">
          <span class="period-letter">W</span>
          <span class="period-text">Week</span>
        </button>
        <button class="period-btn" data-period="month" onclick="setPeriod('month')" title="This Month">
          <span class="period-letter">M</span>
          <span class="period-text">Month</span>
        </button>
        <button class="period-btn active" data-period="twomonths" onclick="setPeriod('twomonths')" title="Next 2 Months">
          <span class="period-letter">O</span>
          <span class="period-text">2 Months</span>
        </button>
        <button class="period-btn" data-period="all" onclick="setPeriod('all')" title="All Time">
          <span class="period-letter">A</span>
          <span class="period-text">ALL</span>
        </button>
      </div>
    </div>
  </div>

  <!-- ── MAIN ── -->
  <main class="main">

    <!-- Stat Cards -->
    <div class="summary-header">
      <span class="summary-meta" id="summaryMeta"></span>
      <button class="restore-btn" id="restoreBtn" onclick="restoreAllCards()">Show hidden cards</button>
    </div>

    <div class="summary-grid" id="summaryGrid">

      <div class="stat-card total" id="card-total">
        <button class="hide-card-btn" onclick="hideCard('total')" title="Hide this card">
          <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/></svg>
        </button>
        <div class="stat-label">Total Tasks</div>
        <div class="stat-value" id="statTotal">0</div>
        <div class="stat-sub">all categories</div>
      </div>

      <div class="stat-card todo" id="card-todo">
        <button class="hide-card-btn" onclick="hideCard('todo')" title="Hide this card">
          <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/></svg>
        </button>
        <div class="stat-label">To Do</div>
        <div class="stat-value" id="statTodo">0</div>
        <div class="stat-sub">not started</div>
      </div>

      <div class="stat-card inprog" id="card-inprog">
        <button class="hide-card-btn" onclick="hideCard('inprog')" title="Hide this card">
          <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/></svg>
        </button>
        <div class="stat-label">In Progress</div>
        <div class="stat-value" id="statInprog">0</div>
        <div class="stat-sub">ongoing</div>
      </div>

      <div class="stat-card done" id="card-done">
        <button class="hide-card-btn" onclick="hideCard('done')" title="Hide this card">
          <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/></svg>
        </button>
        <div class="stat-label">Done</div>
        <div class="stat-value" id="statDone">0</div>
        <div class="stat-sub">completed</div>
      </div>

      <div class="stat-card" id="card-overdue">
        <button class="hide-card-btn" onclick="hideCard('overdue')" title="Hide this card">
          <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/></svg>
        </button>
        <div class="stat-label">Overdue</div>
        <div class="stat-value" id="statOverdue" style="color:var(--red)">0</div>
        <div class="stat-sub">past due date</div>
      </div>

    </div>

    <!-- Task Section -->
    <div class="section-header">
      <div class="section-title">All Tasks</div>
      <div class="sort-buttons">
        <button class="sort-btn active" data-sort="due" onclick="setSortMode('due')">DUE</button>
        <button class="sort-btn" data-sort="do" onclick="setSortMode('do')">DO</button>
      </div>
      <button class="filter-toggle" id="filterToggle" onclick="toggleFilters()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/>
        </svg>
        Filters
      </button>
      <div class="filters" id="filtersSection">
        <input class="search-input" type="text" id="searchInput" placeholder="Search tasks..." oninput="renderTasks()" />
        <select class="filter-select" id="filterCat" onchange="renderTasks()">
          <option value="">All Categories</option>
          <option value="quiz">Quiz</option>
          <option value="project">Project</option>
          <option value="assignment">Assignment</option>
          <option value="review">Review</option>
          <option value="output">Output</option>
          <option value="online">Online Appt.</option>
          <option value="facetoface">Face-to-face</option>
          <option value="other">Other</option>
        </select>
        <select class="filter-select" id="filterStatus" onchange="renderTasks()">
          <option value="">All Status</option>
          <option value="todo">To Do</option>
          <option value="inprog">In Progress</option>
          <option value="done">Done</option>
        </select>
      </div>
    </div>

    <div class="task-list" id="taskList"></div>

  </main>

  <!-- ── ADD / EDIT MODAL ── -->
  <div class="modal-overlay" id="modalOverlay" onclick="handleOverlayClick(event)">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title" id="modalTitle">Add Task</div>
        <button class="modal-close" onclick="closeModal()">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </button>
      </div>

      <div class="form-group">
        <label class="form-label">Task Name *</label>
        <input class="form-control" id="fName" type="text" placeholder="e.g. Submit Chemistry quiz" />
      </div>

      <div class="form-group">
        <label class="form-label">Category</label>
        <select class="form-control" id="fCat">
          <option value="quiz">Quiz</option>
          <option value="project">Project</option>
          <option value="assignment">Assignment</option>
          <option value="review">Review</option>
          <option value="output">Output</option>
          <option value="online">Online Appointment</option>
          <option value="facetoface">Face-to-face</option>
          <option value="other">Other</option>
        </select>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Due Date</label>
          <input class="form-control" id="fDate" type="date" />
        </div>
        <div class="form-group">
          <label class="form-label">Due Time</label>
          <input class="form-control" id="fTime" type="time" />
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Do Date</label>
          <input class="form-control" id="fTargetDate" type="date" />
        </div>
        <div class="form-group">
          <label class="form-label">Do Time</label>
          <input class="form-control" id="fTargetTime" type="time" />
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">Status</label>
        <select class="form-control" id="fStatus">
          <option value="todo">To Do</option>
          <option value="inprog">In Progress</option>
          <option value="done">Done</option>
        </select>
      </div>

      <div class="form-group">
        <label class="form-label">Notes / Description</label>
        <textarea class="form-control" id="fNotes" placeholder="Any additional details, links, or reminders..."></textarea>
      </div>

      <div class="form-actions">
        <button class="btn-cancel" onclick="closeModal()">Cancel</button>
        <button class="btn-save"   onclick="saveTask()">Save Task</button>
      </div>
    </div>
  </div>

  <!-- ── ARCHIVE MODAL ── -->
  <div class="modal-overlay" id="archiveOverlay" onclick="handleArchiveOverlayClick(event)">
    <div class="modal archive-modal">
      <div class="modal-header">
        <div class="modal-title">Archive</div>
        <button class="modal-close" onclick="closeArchive()">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </button>
      </div>

      <div class="archive-content" id="archiveContent">
        <div class="empty-state">
          <svg width="52" height="52" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.3">
            <polyline points="21 8 21 21 3 21 3 8"/>
            <rect x="1" y="3" width="22" height="5"/>
            <line x1="10" y1="12" x2="14" y2="12"/>
          </svg>
          <h3>No archived tasks</h3>
          <p>Deleted tasks will appear here.</p>
        </div>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
