<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Task Hub</title>
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;1,9..40,400&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <!-- ── TOPBAR ── -->
  <header class="topbar">
    <div class="topbar-row-1">
      <div class="logo" onclick="refreshPage()" style="cursor: pointer;" title="Click to refresh">Task<span>Hub</span></div>
      <button class="btn-add" onclick="openModal()">Add Task</button>
    </div>
    <div class="topbar-row-2">
      <button class="topbar-icon-btn" id="fullscreenBtn" onclick="toggleFullscreen()" title="Toggle Fullscreen">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/>
        </svg>
      </button>
      <button class="topbar-icon-btn" onclick="openArchive()" title="Archive">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="21 8 21 21 3 21 3 8"/>
          <rect x="1" y="3" width="22" height="5"/>
          <line x1="10" y1="12" x2="14" y2="12"/>
        </svg>
      </button>
      <span class="date-label-inline" id="dateLabelInline"></span>
      <button class="topbar-icon-btn" id="dataBtn" onclick="openDataModal()" title="Export/Import Tasks">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
          <polyline points="17 8 12 3 7 8"/>
          <line x1="12" y1="3" x2="12" y2="15"/>
        </svg>
      </button>
      <input type="file" id="importFile" accept=".json" style="display: none;" onchange="importTasksFromFile(event)">
      <button class="topbar-icon-btn" id="themeToggle" onclick="toggleTheme()" title="Toggle Theme">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="theme-icon-light">
          <circle cx="12" cy="12" r="5"/>
          <line x1="12" y1="1" x2="12" y2="3"/>
          <line x1="12" y1="21" x2="12" y2="23"/>
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
          <line x1="1" y1="12" x2="3" y2="12"/>
          <line x1="21" y1="12" x2="23" y2="12"/>
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
        </svg>
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="theme-icon-dark" style="display:none;">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
        </svg>
      </button>
    </div>
  </header>

  <!-- ── PERIOD FILTER BAR ── -->
  <div class="period-bar">
    <button class="period-toggle" id="periodToggle" onclick="togglePeriod()">
      <span class="toggle-arrow">▼</span>
      <span id="periodToggleLabel">Feb – Mar 2026</span>
      <span class="toggle-arrow">▼</span>
    </button>
    <div class="period-container" id="periodContainer" style="display: none;">
      <div class="period-buttons">
        <button class="period-btn" data-period="day" onclick="setPeriod('day')" title="Today">
          <span class="period-letter">T</span>
          <span class="period-text">Today</span>
        </button>
        <button class="period-btn" data-period="tomorrow" onclick="setPeriod('tomorrow')" title="Tomorrow">
          <span class="period-letter">2</span>
          <span class="period-text">TMRW</span>
        </button>
        <button class="period-btn" data-period="week" onclick="setPeriod('week')" title="This Week">
          <span class="period-letter">W</span>
          <span class="period-text">Week</span>
        </button>
        <button class="period-btn" data-period="month" onclick="setPeriod('month')" title="This Month">
          <span class="period-letter">M</span>
          <span class="period-text">Month</span>
        </button>
        <button class="period-btn active" data-period="twomonths" onclick="setPeriod('twomonths')" title="Next 2 Months">
          <span class="period-letter">O</span>
          <span class="period-text">2 Months</span>
        </button>
        <button class="period-btn" data-period="all" onclick="setPeriod('all')" title="All Time">
          <span class="period-letter">A</span>
          <span class="period-text">ALL</span>
        </button>
      </div>
    </div>
  </div>

  <!-- ── MAIN ── -->
  <main class="main">

    <!-- Stat Cards -->
    <div class="summary-header">
      <span class="summary-meta" id="summaryMeta"></span>
      <button class="restore-btn" id="restoreBtn" onclick="restoreAllCards()">Show hidden cards</button>
    </div>

    <div class="summary-grid" id="summaryGrid">

      <div class="stat-card total" id="card-total" onclick="setStatFilter('total')" title="Click to show all tasks">
        <button class="hide-card-btn" onclick="hideCard('total', event)" title="Hide this card">
          <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/></svg>
        </button>
        <div class="stat-label">Total Tasks</div>
        <div class="stat-value" id="statTotal">0</div>
        <div class="stat-sub">all categories</div>
      </div>

      <div class="stat-card todo" id="card-todo" onclick="setStatFilter('todo')" title="Click to show To Do tasks">
        <button class="hide-card-btn" onclick="hideCard('todo', event)" title="Hide this card">
          <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/></svg>
        </button>
        <div class="stat-label">To Do</div>
        <div class="stat-value" id="statTodo">0</div>
        <div class="stat-sub">not started</div>
      </div>

      <div class="stat-card inprog" id="card-inprog" onclick="setStatFilter('inprog')" title="Click to show In Progress tasks">
        <button class="hide-card-btn" onclick="hideCard('inprog', event)" title="Hide this card">
          <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/></svg>
        </button>
        <div class="stat-label">In Progress</div>
        <div class="stat-value" id="statInprog">0</div>
        <div class="stat-sub">ongoing</div>
      </div>

      <div class="stat-card done" id="card-done" onclick="setStatFilter('done')" title="Click to show Done tasks">
        <button class="hide-card-btn" onclick="hideCard('done', event)" title="Hide this card">
          <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/></svg>
        </button>
        <div class="stat-label">Done</div>
        <div class="stat-value" id="statDone">0</div>
        <div class="stat-sub">completed</div>
      </div>

      <div class="stat-card" id="card-overdue" onclick="setStatFilter('overdue')" title="Click to show Overdue tasks">
        <button class="hide-card-btn" onclick="hideCard('overdue', event)" title="Hide this card">
          <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/></svg>
        </button>
        <div class="stat-label">Overdue</div>
        <div class="stat-value" id="statOverdue" style="color:var(--red)">0</div>
        <div class="stat-sub">past due date</div>
      </div>

      <div class="stat-card progress-card" id="card-progress" title="Progress overview">
        <button class="hide-card-btn" onclick="hideCard('progress', event)" title="Hide this card">
          <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/></svg>
        </button>
        <div class="progress-circle-container">
          <svg id="progressCircle" viewBox="0 0 100 100" class="progress-circle"></svg>
          <div class="progress-center">
            <div class="progress-percent" id="progressPercent">0%</div>
            <div class="progress-label" id="progressLabel">completed</div>
          </div>
        </div>
      </div>

    </div>

    <!-- Task Section -->
    <div class="section-header">
      <div class="section-title-row">
        <div class="section-title">All Tasks</div>
        <div class="section-controls">
          <div class="sort-buttons">
            <button class="sort-btn active" data-sort="due" onclick="setSortMode('due')">DUE</button>
            <button class="sort-btn" data-sort="do" onclick="setSortMode('do')">DO</button>
          </div>
          <button class="filter-toggle" id="filterToggle" onclick="toggleFilters()">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/>
            </svg>
            Filters
          </button>
        </div>
      </div>

      <!-- Filters Dropdown -->
      <div class="filters" id="filtersSection">
        <input class="search-input" type="text" id="searchInput" placeholder="Search tasks…" oninput="renderTasks()" />
        <select class="filter-select" id="filterCat" onchange="renderTasks()">
          <option value="">All Categories</option>
          <option value="quiz">Quiz</option>
          <option value="project">Project</option>
          <option value="assignment">Assignment</option>
          <option value="exam">Exam</option>
          <option value="study">Study</option>
          <option value="review">Review</option>
          <option value="output">Output</option>
          <option value="online">Online Class</option>
          <option value="facetoface">F2F Class</option>
          <option value="learning">Learning Task</option>
          <option value="other">Other</option>
        </select>
        <select class="filter-select" id="filterStatus" onchange="renderTasks()">
          <option value="">All Status</option>
          <option value="todo">To Do</option>
          <option value="inprog">In Progress</option>
          <option value="done">Done</option>
        </select>
      </div>
    </div>

    <div class="task-list" id="taskList"></div>

  </main>

  <!-- ── ADD / EDIT MODAL ── -->
  <div class="modal-overlay" id="modalOverlay" onclick="handleOverlayClick(event)">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title" id="modalTitle">Add Task</div>
        <button class="modal-close" onclick="closeModal()">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </button>
      </div>

      <div class="form-group">
        <label class="form-label">Task Name *</label>
        <input class="form-control" id="fName" type="text" placeholder="e.g. Submit Chemistry quiz" />
      </div>

      <div class="form-group">
        <label class="form-label">Category</label>
        <!-- hidden native select keeps value for saveTask() -->
        <select class="form-control" id="fCat" style="display:none;">
          <option value="quiz">Quiz</option>
          <option value="project">Project</option>
          <option value="assignment">Assignment</option>
          <option value="exam">Exam</option>
          <option value="study">Study</option>
          <option value="review">Review</option>
          <option value="output">Output</option>
          <option value="online">Online Class</option>
          <option value="facetoface">F2F Class</option>
          <option value="learning">Learning Task</option>
          <option value="other">Other</option>
        </select>
        <!-- custom styled dropdown -->
        <div class="cat-select-wrapper">
          <div class="cat-custom-select" id="catCustomSelect">
            <div class="cat-selected" onclick="toggleCatDropdown()">
              <span class="cat-dot-option" id="catSelectedDot" style="background:#6d28d9"></span>
              <span id="catSelectedLabel">Quiz</span>
              <svg class="cat-chevron" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="6 9 12 15 18 9"/></svg>
            </div>
            <div class="cat-options" id="catOptions"></div>
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Due Date</label>
          <input class="form-control" id="fDate" type="date" />
        </div>
        <div class="form-group">
          <label class="form-label">Due Time</label>
          <input class="form-control" id="fTime" type="time" />
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Do Date</label>
          <input class="form-control" id="fTargetDate" type="date" />
        </div>
        <div class="form-group">
          <label class="form-label">Do Time</label>
          <input class="form-control" id="fTargetTime" type="time" />
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">Status</label>
        <select class="form-control" id="fStatus">
          <option value="todo">To Do</option>
          <option value="inprog">In Progress</option>
          <option value="done">Done</option>
        </select>
      </div>

      <div class="form-group">
        <label class="form-label">Notes / Description</label>
        <textarea class="form-control" id="fNotes" placeholder="Any additional details, links, or reminders..."></textarea>
      </div>

      <div class="form-actions">
        <button class="btn-cancel" onclick="closeModal()">Cancel</button>
        <button class="btn-save"   onclick="saveTask()">Save Task</button>
      </div>
    </div>
  </div>

  <!-- ── ARCHIVE MODAL ── -->
  <div class="modal-overlay" id="archiveOverlay" onclick="handleArchiveOverlayClick(event)">
    <div class="modal archive-modal">
      <div class="modal-header">
        <div class="modal-title">Archive</div>
        <button class="modal-close" onclick="closeArchive()">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </button>
      </div>
      <div class="archive-content" id="archiveContent">
        <div class="empty-state">
          <svg width="52" height="52" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.3">
            <polyline points="21 8 21 21 3 21 3 8"/>
            <rect x="1" y="3" width="22" height="5"/>
            <line x1="10" y1="12" x2="14" y2="12"/>
          </svg>
          <h3>No archived tasks</h3>
          <p>Deleted tasks will appear here.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- ── DATA EXPORT/IMPORT MODAL ── -->
  <div class="modal-overlay" id="dataOverlay" onclick="handleDataOverlayClick(event)">
    <div class="modal data-modal">
      <div class="modal-header">
        <div class="modal-title">Export / Import</div>
        <button class="modal-close" onclick="closeDataModal()">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </button>
      </div>
      <div class="data-modal-content">
        <button class="data-action-btn import-btn" onclick="importTasks()">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="7 10 12 15 17 10"/>
            <line x1="12" y1="15" x2="12" y2="3"/>
          </svg>
          <div class="data-action-text">
            <div class="data-action-title">Import Tasks</div>
            <div class="data-action-desc">Load tasks from backup file</div>
          </div>
        </button>
        <button class="data-action-btn export-btn" onclick="exportTasks()">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="17 8 12 3 7 8"/>
            <line x1="12" y1="3" x2="12" y2="15"/>
          </svg>
          <div class="data-action-text">
            <div class="data-action-title">Export Tasks</div>
            <div class="data-action-desc">Save tasks to backup file</div>
          </div>
        </button>
      </div>
    </div>
  </div>

  <!-- ── CONFIRMATION MODAL ── -->
  <div class="modal-overlay" id="confirmOverlay" onclick="handleConfirmOverlayClick(event)">
    <div class="modal confirm-modal">
      <div class="modal-header">
        <div class="modal-title" id="confirmModalTitle">Confirm Action</div>
        <button class="modal-close" onclick="closeConfirmModal()">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </button>
      </div>
      <div class="confirm-modal-content">
        <div class="confirm-icon" id="confirmModalIcon">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <circle cx="12" cy="12" r="10"/>
            <line x1="12" y1="8" x2="12" y2="12"/>
            <line x1="12" y1="16" x2="12.01" y2="16"/>
          </svg>
        </div>
        <p class="confirm-message" id="confirmModalMessage">Are you sure you want to proceed?</p>
      </div>
      <div class="confirm-actions">
        <button class="cancel-btn" id="confirmCancelBtn" onclick="closeConfirmModal()">Cancel</button>
        <button class="confirm-btn" id="confirmModalBtn">Confirm</button>
      </div>
    </div>
  </div>


  <!-- ── FOOTER ── -->
  <footer class="site-footer">
    <span>by: <strong>LHOEL</strong> — BSCS Student</span>
  </footer>

  <script src="app.js"></script>
</body>
</html>
